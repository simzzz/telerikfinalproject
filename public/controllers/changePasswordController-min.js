import{templates}from"templates";import{UserRequester}from"userRequester";const changePasswordController=function(e){templates.getPage("changePassword",e).done(()=>{$("#dropdownMenuLink").click(()=>{$("#dropdownMenu").hasClass("hidden")?$("#dropdownMenu").removeClass("hidden"):$("#dropdownMenu").addClass("hidden")}),$("#title").html("Change Password!");const s=$("#changeBtn"),r=$("#tb-currentPass"),o=$("#tb-newPassword"),t=$("#tb-confirmPassword");s.on("click",()=>{const s=o.val();if(t.val()!==s)toastr.error("Passwords do not match!");else if(""===s.trim())toastr.error("The new password cannot be empty!");else{const o=(new UserRequester).currentUser,t=firebase.auth.EmailAuthProvider.credential(e.email,r.val());Promise.resolve(o.reauthenticateWithCredential(t)).then(()=>{Promise.resolve(o.updatePassword(s)).then(()=>{toastr.success("You have changed your password successfully!"),location.hash="/user"},function(e){toastr.error(`${e.message}`)})},function(e){toastr.error(`${e.message}`)})}})})};export{changePasswordController};